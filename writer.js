var items = {
    "SCV": "Tbcs",
    "Marine": "Tbba",
    "Marauder": "Tbbd",
    "Reaper": "Tbbr",
    "Ghost": "Tbbg",
    "Hellion": "Tvfe",
    "Siege Tank": "Tvfs",
    "Thor": "Tvft",
    "Viking": "Tvsv",
    "Medivac": "Tvsd",
    "Raven": "Tvsr",
    "Banshee": "Tvse",
    "Battlecruiser": "Tvsb",
    "Hellbat": "Tvfr",
    "Widow Mine": "Tvfd",
    "Liberator": "Tvsn",
    "Cyclone": "Tvfn",
    "Drone": "Zsd",
    "Overlord": "Zsv",
    "Zergling": "Zsz",
    "Queen": "Zbhq",
    "Hydralisk": "Zsh",
    "Baneling": "Zsze",
    "Overseer": "Zsvv",
    "Roach": "Zsr",
    "Infestor": "Zsf",
    "Mutalisk": "Zst",
    "Corruptor": "Zsc",
    "Nydus Worm": "Zvn",
    "Ultralisk": "Zsu",
    "Brood Lord": "Zscb",
    "Swarm Host": "Zsa",
    "Viper": "Zse",
    "Ravager": "Zsrv",
    "Lurker": "Zshe",
    "Probe": "Pbne",
    "Zealot": "Pbgz",
    "Stalker": "Pbgs",
    "Sentry": "Pbge",
    "Observer": "Pvrb",
    "Immortal": "Pvri",
    "Warp Prism": "Pvra",
    "Colossus": "Pvrc",
    "Phoenix": "Pvsx",
    "Void Ray": "Pvsv",
    "High Templar": "Pbgt",
    "Dark Templar": "Pbgd",
    "Archon": "Pbgtt",
    "Carrier": "Pvsc",
    "Mothership": "Pbnu",
    "Mothership Core": "Pbnm",
    "Oracle": "Pvse",
    "Tempest": "Pvst",
    "Adept": "Pbgh",
    "Disruptor": "Pvrd",
    "TerranInfantryWeaponsLevel1": "Tbea",
    "TerranInfantryWeaponsLevel2": "Tbea",
    "TerranInfantryWeaponsLevel3": "Tbea",
    "TerranVehicleWeaponsLevel1": "Tvae",
    "TerranVehicleWeaponsLevel2": "Tvae",
    "TerranVehicleWeaponsLevel3": "Tvae",
    "TerranShipWeaponsLevel1": "Tvas",
    "TerranShipWeaponsLevel2": "Tvas",
    "TerranShipWeaponsLevel3": "Tvas",
    "TerranInfantryArmorsLevel1": "Tbea",
    "TerranInfantryArmorsLevel2": "Tbea",
    "TerranInfantryArmorsLevel3": "Tbea",
    "TerranVehicleAndShipArmorsLevel1": "Tvav",
    "TerranVehicleAndShipArmorsLevel2": "Tvav",
    "TerranVehicleAndShipArmorsLevel3": "Tvav",
    "ProtossGroundWeaponsLevel1": "Pbfg",
    "ProtossGroundWeaponsLevel2": "Pbfg",
    "ProtossGroundWeaponsLevel3": "Pbfg",
    "ProtossAirWeaponsLevel1": "Pbye",
    "ProtossAirWeaponsLevel2": "Pbye",
    "ProtossAirWeaponsLevel3": "Pbye",
    "ProtossGroundArmorsLevel1": "Pbfa",
    "ProtossGroundArmorsLevel2": "Pbfa",
    "ProtossGroundArmorsLevel3": "Pbfa",
    "ProtossAirArmorsLevel1": "Pbya",
    "ProtossAirArmorsLevel2": "Pbya",
    "ProtossAirArmorsLevel3": "Pbya",
    "ProtossShieldsLevel1": "Pbfs",
    "ProtossShieldsLevel2": "Pbfs",
    "ProtossShieldsLevel3": "Pbfs",
    "ZergMeleeWeaponsLevel1": "Zbvm",
    "ZergMeleeWeaponsLevel2": "Zbvm",
    "ZergMeleeWeaponsLevel3": "Zbvm",
    "ZergMissileWeaponsLevel1": "Zbva",
    "ZergMissileWeaponsLevel2": "Zbva",
    "ZergMissileWeaponsLevel3": "Zbva",
    "ZergFlyerWeaponsLevel1": "Zvsa",
    "ZergFlyerWeaponsLevel2": "Zvsa",
    "ZergFlyerWeaponsLevel3": "Zvsa",
    "ZergGroundArmorsLevel1": "Zbvc",
    "ZergGroundArmorsLevel2": "Zbvc",
    "ZergGroundArmorsLevel3": "Zbvc",
    "ZergFlyerArmorsLevel1": "Zvsc",
    "ZergFlyerArmorsLevel2": "Zvsc",
    "ZergFlyerArmorsLevel3": "Zvsc",
    "ShieldWall": "Tbbxc",
    "Stimpack": "Tbbxt",
    "PunisherGrenades": "Tbbxg",
    "HighCapacityBarrels": "Tvfxi",
    "CycloneRapidFireLaunchers": "Tvfxa",
    "DrillClaws": "Tvfxc",
    "SmartServos": "Tvfxs",
    "MedivacIncreaseSpeedBoost": "Tvsxr",
    "RavenCorvidReactor": "Tvsxt",
    "BansheeCloak": "Tvsxc",
    "BansheeSpeed": "Tvsxb",
    "LiberatorAGRangeUpgrade": "Tvsxn",
    "BattlecruiserEnableSpecializations": "Tvcr",
    "PersonalCloaking": "Tvgc",
    "HiSecAutoTracking": "Tbeh",
    "TerranBuildingArmor": "Tbeb",
    "NeosteelFrame": "Tben",
    "WarpGateResearch": "Pbgg",
    "Charge": "Pvcc",
    "BlinkTech": "Pvdb",
    "AdeptPiercingAttack": "Pvca",
    "PsiStormTech": "Pvtt",
    "DarkTemplarBlinkUpgrade": "Pvdb",
    "ObserverGraviticBooster": "Pvbb",
    "GraviticDrive": "Pvbg",
    "ExtendedThermalLance": "Pvbe",
    "PhoenixRangeUpgrade": "Pvfr",
    "CarrierLaunchSpeedUpgrade": "Pvfg",
    "zerglingmovementspeed": "Zbsm",
    "zerglingattackspeed": "Zbsa",
    "GlialReconstitution": "Zbrg",
    "TunnelingClaws": "Zbrt",
    "InfestorEnergyUpgrade": "Zvig",
    "NeuralParasite": "Zvie",
    "EvolveGroovedSpines": "Zvhg",
    "overlordspeed": "Zbhp",
    "EvolveMuscularAugments": "Zvhh",
    "Burrow": "Zbhb",
    "DiggingClaws": "Zvdd",
    "ChitinousPlating": "Zvuc",
    "SupplyDepot": "Tbs",
    "Refinery": "Tbr",
    "Barracks": "Tbb",
    "CommandCenter": "Tbc",
    "BarracksTechLab": "Tx",
    "FactoryTechLab": "Tx",
    "StarportTechLab": "Tx",
    "BarracksReactor": "Tc",
    "FactoryReactor": "Tc",
    "StarportReactor": "Tc",
    "Factory": "Tvf",
    "Starport": "Tvs",
    "EngineeringBay": "Tbe",
    "Bunker": "Tbu",
    "GhostAcademy": "Tvg",
    "Armory": "Tva",
    "MissileTurret": "Tbt",
    "SensorTower": "Tbn",
    "FusionCore": "Tvc",
    "Pylon": "Pbe",
    "Assimilator": "Pba",
    "Gateway": "Pbg",
    "CyberneticsCore": "Pby",
    "Forge": "Pbf",
    "Stargate": "Pvs",
    "Nexus": "Pbn",
    "PhotonCannon": "Pbc",
    "RoboticsFacility": "Pvr",
    "ShieldBattery": "Pbb",
    "TwilightCouncil": "Pvc",
    "FleetBeacon": "Pvf",
    "TemplarArchive": "Pvt",
    "DarkShrine": "Pvd",
    "RoboticsBay": "Pvb",
    "Extractor": "Zbe",
    "Hatchery": "Zbh",
    "SpawningPool": "Zbs",
    "EvolutionChamber": "Zbv",
    "SpineCrawler": "Zbc",
    "SporeCrawler": "Zba",
    "RoachWarren": "Zbr",
    "BanelingNest": "Zbb",
    "HydraliskDen": "Zvh",
    "Spire": "Zvs",
    "InfestationPit": "Zvi",
    "NydusNetwork": "Zvn",
    "LurkerDenMP": "Zvd",
    "NydusCanal": "Zvnn",
    "UltraliskCavern": "Zvu"
};

var supplyCost = {
    "SCV": 1,
    "Marine": 1,
    "Marauder": 2,
    "Reaper": 1,
    "Ghost": 2,
    "Hellion": 2,
    "Siege Tank": 3,
    "Thor": 6,
    "Viking": 2,
    "Medivac": 2,
    "Raven": 2,
    "Banshee": 3,
    "Battlecruiser": 6,
    "Hellbat": 2,
    "Widow Mine": 2,
    "Liberator": 3,
    "Cyclone": 3,
    "Drone": 1,
    "Zergling": 1,
    "Queen": 2,
    "Hydralisk": 2,
    "Roach": 2,
    "Infestor": 2,
    "Mutalisk": 2,
    "Corruptor": 2,
    "Ultralisk": 6,
    "Brood Lord": 2,
    "Swarm Host": 3,
    "Viper": 3,
    "Ravager": 1,
    "Lurker": 1,
    "Probe": 1,
    "Zealot": 2,
    "Stalker": 2,
    "Sentry": 2,
    "Observer": 1,
    "Immortal": 4,
    "Warp Prism": 2,
    "Colossus": 6,
    "Phoenix": 2,
    "Void Ray": 4,
    "High Templar": 2,
    "Dark Templar": 2,
    "Carrier": 6,
    "Mothership": 8,
    "Mothership Core": 2,
    "Oracle": 3,
    "Tempest": 6,
    "Adept": 2,
    "Disruptor": 3
};

var supply = {
    "SupplyDepot": 8,
    "CommandCenter": 15,
    "Pylon": 8,
    "Nexus": 15,
    "Hatchery": 6,
    "Overlord": 8
};

var supplyNum = 12;
var supplyLimit = 15;

function getSec(loop) {
    return loop / 1.4 / 16;
}

function setSupply(itemName) {
    if (supply.hasOwnProperty(itemName)) {
        supplyLimit += supply[itemName];
    } else if (supplyCost.hasOwnProperty(itemName)) {
        supplyNum += supplyCost[itemName];
    }
}

function writer(i, t, s) {
    
}

var fs = require("fs");
fs.readFile(process.argv[2], 'utf8', function (err, data) {
    var json = JSON.parse(data);
    for (var key in json) {
        if (json.hasOwnProperty(key)) {
            var e = json[key];
            if (e.length > 0) {
                var i = [];
                var t = [];
                var s = [];
                var pastTime = 0;

                if (e[0].name == "Drone") {
                    supplyLimit = 14;
                } else {
                    supplyLimit = 15;
                }
                supplyNum = 12;

                for (var index = 0; index < e.length; index++) {
                    var element = e[index];
                    if (items[element.name]) {

                        i.push(items[element.name]);

                        var nowTime = Math.round(getSec(element.loop));
                        if (nowTime > pastTime) {
                            t.push(nowTime);
                            pastTime = nowTime;
                        } else {
                            t.push(pastTime + 1);
                            pastTime += 1;
                        }

                        setSupply(element.name);
                        s.push(supplyNum.toString() + "/" + supplyLimit.toString());
                    }
                }


            }
        }
    }
});